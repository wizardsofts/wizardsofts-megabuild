# =============================================================================
# APPWRITE ENVIRONMENT CONFIGURATION - BondWala
# =============================================================================
# Copy this file to .env.appwrite and configure before deployment
# CRITICAL: Generate unique values for all security keys!
#
# Quick Start:
#   1. cp .env.appwrite.template .env.appwrite
#   2. Generate keys: openssl rand -hex 32 (for each key)
#   3. Configure domain and SMTP settings
#   4. docker compose -f docker-compose.appwrite.yml --env-file .env.appwrite up -d
# =============================================================================

# -----------------------------------------------------------------------------
# CORE CONFIGURATION
# -----------------------------------------------------------------------------

# Environment: production | development
_APP_ENV=production

# Workers per CPU core (6 recommended for production)
_APP_WORKER_PER_CORE=6

# Default locale
_APP_LOCALE=en

# -----------------------------------------------------------------------------
# DOMAIN CONFIGURATION
# -----------------------------------------------------------------------------

# Primary domain for Appwrite console and API
_APP_DOMAIN=appwrite.bondwala.com

# Target domain (same as _APP_DOMAIN for simple setups)
_APP_DOMAIN_TARGET=appwrite.bondwala.com

# Functions subdomain (optional, for serverless functions)
_APP_DOMAIN_FUNCTIONS=functions.bondwala.com

# -----------------------------------------------------------------------------
# SECURITY KEYS (CRITICAL - GENERATE UNIQUE VALUES!)
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32

# OpenSSL encryption key for data at rest (256-bit)
# Command: openssl rand -hex 32
_APP_OPENSSL_KEY_V1=your_256_bit_key_here_generate_with_openssl_rand_hex_32

# Application secret for session signing
# Command: openssl rand -hex 32
_APP_SECRET=your_app_secret_here_generate_with_openssl_rand_hex_32

# Executor secret for function execution
# Command: openssl rand -hex 32
_APP_EXECUTOR_SECRET=your_executor_secret_here_generate_with_openssl_rand_hex_32

# -----------------------------------------------------------------------------
# CONSOLE ACCESS CONTROL
# -----------------------------------------------------------------------------
# The self-hosted console UI is accessible at:
# - https://appwrite.wizardsofts.com/console
# - https://appwrite.bondwala.com/console
#
# First-time setup requires signing up with an email from _APP_CONSOLE_WHITELIST_EMAILS

# Enable root user whitelist (enabled | disabled)
_APP_CONSOLE_WHITELIST_ROOT=enabled

# Comma-separated list of emails allowed to create first admin account
# IMPORTANT: First signup must use this email
_APP_CONSOLE_WHITELIST_EMAILS=admin@wizardsofts.com,tech@wizardsofts.com

# Comma-separated list of IPs allowed to access console (empty = all IPs)
# Leave empty to allow all IPs (production: restrict to office/VPN IPs)
_APP_CONSOLE_WHITELIST_IPS=

# -----------------------------------------------------------------------------
# DATABASE - MariaDB
# -----------------------------------------------------------------------------

_APP_DB_HOST=appwrite-mariadb
_APP_DB_PORT=3306
_APP_DB_SCHEMA=appwrite
_APP_DB_USER=wizardsofts

# Database password (REQUIRED: Set to secure password)
# Command: openssl rand -base64 24
# Default: W1z4rdS0fts!2025 (CHANGE IN PRODUCTION)
_APP_DB_PASS=W1z4rdS0fts!2025

# Root password (REQUIRED: Set to secure password)
# Command: openssl rand -base64 24
# Default: W1z4rdS0fts!2025 (CHANGE IN PRODUCTION)
_APP_DB_ROOT_PASS=W1z4rdS0fts!2025

# -----------------------------------------------------------------------------
# CACHE - Redis
# -----------------------------------------------------------------------------

_APP_REDIS_HOST=appwrite-redis
_APP_REDIS_PORT=6379
_APP_REDIS_USER=
_APP_REDIS_PASS=

# -----------------------------------------------------------------------------
# EMAIL / SMTP CONFIGURATION
# -----------------------------------------------------------------------------
# Configure for email notifications (password recovery, invites, etc.)
# Options: Mailcow (internal), SendGrid, Mailgun, Amazon SES

# Using Mailcow (internal mail server):
# _APP_SMTP_HOST=mail.wizardsofts.com
# _APP_SMTP_PORT=587
# _APP_SMTP_SECURE=tls
# _APP_SMTP_USERNAME=appwrite@wizardsofts.com
# _APP_SMTP_PASSWORD=your_mailcow_password

# Using SendGrid:
# _APP_SMTP_HOST=smtp.sendgrid.net
# _APP_SMTP_PORT=587
# _APP_SMTP_SECURE=tls
# _APP_SMTP_USERNAME=apikey
# _APP_SMTP_PASSWORD=your_sendgrid_api_key

# Leave empty to disable email functionality
_APP_SMTP_HOST=
_APP_SMTP_PORT=587
_APP_SMTP_SECURE=tls
_APP_SMTP_USERNAME=
_APP_SMTP_PASSWORD=

# System email identity
_APP_SYSTEM_EMAIL_NAME=BondWala
_APP_SYSTEM_EMAIL_ADDRESS=noreply@bondwala.com

# -----------------------------------------------------------------------------
# LOGGING & MONITORING
# -----------------------------------------------------------------------------
# Provider: sentry | appwrite | none

# Using Sentry (recommended for production):
# _APP_LOGGING_PROVIDER=sentry
# _APP_LOGGING_CONFIG=https://xxx@sentry.io/xxx

# Leave empty to use default console logging
_APP_LOGGING_PROVIDER=
_APP_LOGGING_CONFIG=

# -----------------------------------------------------------------------------
# STORAGE CONFIGURATION
# -----------------------------------------------------------------------------

# Maximum storage limit (10GB default)
_APP_STORAGE_LIMIT=10737418240

# Maximum preview size (20MB default)
_APP_STORAGE_PREVIEW_LIMIT=20000000

# Antivirus scanning (disabled | enabled)
# Note: Requires ClamAV container if enabled
_APP_STORAGE_ANTIVIRUS=disabled

# -----------------------------------------------------------------------------
# USAGE ANALYTICS
# -----------------------------------------------------------------------------

# Enable usage statistics collection (enabled | disabled)
_APP_USAGE_STATS=enabled

# -----------------------------------------------------------------------------
# RATE LIMITING & SECURITY
# -----------------------------------------------------------------------------

# Enable abuse protection (enabled | disabled)
_APP_OPTIONS_ABUSE=enabled

# Force HTTPS (enabled | disabled)
_APP_OPTIONS_FORCE_HTTPS=enabled

# -----------------------------------------------------------------------------
# MAINTENANCE CONFIGURATION
# -----------------------------------------------------------------------------

# Maintenance interval in seconds (86400 = 24 hours)
_APP_MAINTENANCE_INTERVAL=86400

# Data retention periods in seconds
_APP_MAINTENANCE_RETENTION_EXECUTION=1209600    # 14 days
_APP_MAINTENANCE_RETENTION_CACHE=2592000        # 30 days
_APP_MAINTENANCE_RETENTION_ABUSE=86400          # 1 day
_APP_MAINTENANCE_RETENTION_AUDIT=1209600        # 14 days
_APP_MAINTENANCE_RETENTION_USAGE_HOURLY=8640000 # 100 days

# -----------------------------------------------------------------------------
# EXECUTOR CONFIGURATION (for serverless functions)
# -----------------------------------------------------------------------------

_APP_EXECUTOR_HOST=http://appwrite-executor/v1

# -----------------------------------------------------------------------------
# SMS PROVIDER (Optional - for phone authentication)
# -----------------------------------------------------------------------------
# Provider options: twilio | msg91 | telesign | textmagic | vonage

_APP_SMS_PROVIDER=
_APP_SMS_FROM=

# =============================================================================
# DEPLOYMENT QUICK REFERENCE
# =============================================================================
#
# 1. Generate all security keys:
#    openssl rand -hex 32    # For _APP_OPENSSL_KEY_V1
#    openssl rand -hex 32    # For _APP_SECRET
#    openssl rand -hex 32    # For _APP_EXECUTOR_SECRET
#    openssl rand -base64 24 # For _APP_DB_PASS
#    openssl rand -base64 24 # For _APP_DB_ROOT_PASS
#
# 2. Start services:
#    docker compose -f docker-compose.appwrite.yml --env-file .env.appwrite up -d
#
# 3. Access console:
#    https://appwrite.bondwala.com
#
# 4. Create first admin account:
#    Email must be in _APP_CONSOLE_WHITELIST_EMAILS
#
# 5. Health check:
#    curl https://appwrite.bondwala.com/v1/health
#
# =============================================================================
