# ============================================================================
# WizardSofts Megabuild - Environment Variables Template
# ============================================================================
#
# SECURITY NOTICE:
# 1. Copy this file to .env: cp .env.example .env
# 2. Replace ALL placeholder values with actual credentials
# 3. NEVER commit .env files to git
# 4. Use GitLab CI/CD Variables for production deployments
#
# See docs/GITLAB_CICD_SECRETS.md for more information.
# ============================================================================

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL (main database)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=wizardsofts
DB_USER=postgres
DB_PASSWORD=changeme_use_strong_password

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=changeme_use_strong_password

# ============================================================================
# APPLICATION SERVICES
# ============================================================================

# OpenAI API (for NLQ and Agent services)
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# Internal API Key for service-to-service authentication
# Used by Spring Boot services for write operations
# Generate with: openssl rand -base64 32
API_KEY=changeme_use_strong_api_key

# Google Analytics (optional)
GA_MEASUREMENT_ID=G-XXXXXXXXXX

# Google AdSense (optional)
ADSENSE_CLIENT_ID=ca-pub-XXXXXXXXXXXXXXXX

# ============================================================================
# AUTHENTICATION (Keycloak)
# ============================================================================

# Keycloak Server
KEYCLOAK_DB_HOST=postgres
KEYCLOAK_DB_NAME=keycloak
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=changeme_use_strong_password

KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=changeme_use_strong_password

# OAuth2 Issuer Configuration
KEYCLOAK_ISSUER_URI=https://id.wizardsofts.com/realms/wizardsofts
KEYCLOAK_JWK_SET_URI=https://id.wizardsofts.com/realms/wizardsofts/protocol/openid-connect/certs

# ============================================================================
# OAUTH2 CLIENT SECRETS (Service-to-Service Authentication)
# ============================================================================
# Generate with: openssl rand -base64 32

# API Gateway
WS_GATEWAY_CLIENT_ID=ws-gateway
WS_GATEWAY_CLIENT_SECRET=changeme_use_strong_client_secret

# Microservices
WS_TRADES_CLIENT_ID=ws-trades-service
WS_TRADES_CLIENT_SECRET=changeme_use_strong_client_secret

WS_COMPANY_CLIENT_ID=ws-company-service
WS_COMPANY_CLIENT_SECRET=changeme_use_strong_client_secret

WS_NEWS_CLIENT_ID=ws-news-service
WS_NEWS_CLIENT_SECRET=changeme_use_strong_client_secret

# ============================================================================
# FRONTEND OAUTH2 (Next.js Applications)
# ============================================================================

# NextAuth.js Configuration
NEXTAUTH_URL=https://quant.wizardsofts.com
NEXTAUTH_SECRET=changeme_generate_with_openssl_rand_base64_32

# Keycloak OIDC Provider (public client - no secret needed)
KEYCLOAK_CLIENT_ID=gibd-quant-web
KEYCLOAK_ISSUER=https://id.wizardsofts.com/realms/wizardsofts

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# Traefik Dashboard
TRAEFIK_DASHBOARD_USER=admin
TRAEFIK_DASHBOARD_PASSWORD=changeme_use_strong_password

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_PASSWORD=changeme_use_strong_password

# Grafana OAuth (Keycloak SSO)
# Get client secret from Keycloak admin console for 'grafana' client
GRAFANA_OAUTH_CLIENT_SECRET=changeme_get_from_keycloak

# ============================================================================
# INFRASTRUCTURE SERVICES
# ============================================================================

# GitLab (source control)
GITLAB_ROOT_PASSWORD=changeme_use_strong_password
GITLAB_EXTERNAL_URL=http://10.0.0.84:8090

# N8N (workflow automation)
N8N_BASIC_AUTH_USER=admin
N8N_PASSWORD=changeme_use_strong_password

# Nexus (artifact repository)
NEXUS_ADMIN_PASSWORD=changeme_use_strong_password

# Infrastructure Database
INFRA_DB_PASSWORD=changeme_use_strong_password

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================

# Server access (used by CI/CD - prefer GitLab Variables)
DEPLOY_HOST=10.0.0.84
DEPLOY_USER=wizardsofts
DEPLOY_PATH=/opt/wizardsofts-megabuild

# Docker Compose profile
COMPOSE_PROFILE=gibd-quant

# ============================================================================
# OPTIONAL SERVICES
# ============================================================================

# Ollama (local LLM)
OLLAMA_HOST=localhost
OLLAMA_PORT=11434
OLLAMA_MODEL=llama3.1

# ============================================================================
# NOTES:
# ============================================================================
#
# Password Requirements:
# - Minimum 16 characters
# - Mix of uppercase, lowercase, numbers, symbols
# - Use: openssl rand -base64 24 to generate
#
# For production:
# - Store secrets in GitLab CI/CD Variables
# - Use Keycloak for OAuth2/OIDC authentication
# - Enable TLS/SSL for all connections
# - Rotate credentials quarterly
#
# ============================================================================
