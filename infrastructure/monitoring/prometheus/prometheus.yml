global:
  scrape_interval: 15s
  evaluation_interval: 15s

# Alerting rules for security and infrastructure monitoring
rule_files:
  - security-alerts.yml

# Alertmanager configuration
alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - 10.0.0.84:9093

scrape_configs:
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]

  # Server 84 (Swarm Leader - Production)
  - job_name: "node-exporter-84"
    static_configs:
      - targets: ["10.0.0.84:9100"]
        labels:
          instance: "server-84"
          server: "hp-server"
          environment: "production"

  # Server 80 (GIBD Services)
  - job_name: "node-exporter-80"
    static_configs:
      - targets: ["10.0.0.80:9100"]
        labels:
          instance: "server-80"
          server: "gibd-server"
          environment: "production"

  # Server 81 (Database Server)
  - job_name: "node-exporter-81"
    static_configs:
      - targets: ["10.0.0.81:9100"]
        labels:
          instance: "server-81"
          server: "database-server"
          environment: "production"

  # Server 82 (HPR Server)
  - job_name: "node-exporter-82"
    static_configs:
      - targets: ["10.0.0.82:9100"]
        labels:
          instance: "server-82"
          server: "hpr-server"
          environment: "production"

  # cAdvisor - Server 84
  - job_name: "cadvisor-84"
    static_configs:
      - targets: ["10.0.0.84:8088"]
        labels:
          instance: "server-84"

  # cAdvisor - Server 80
  - job_name: "cadvisor-80"
    static_configs:
      - targets: ["10.0.0.80:8081"]
        labels:
          instance: "server-80"

  # cAdvisor - Server 82
  - job_name: "cadvisor-82"
    static_configs:
      - targets: ["10.0.0.82:8080"]
        labels:
          instance: "server-82"

  # Loki (Log Aggregation)
  - job_name: "loki"
    static_configs:
      - targets: ["10.0.0.84:3100"]
        labels:
          service: "loki"

  # Grafana
  - job_name: "grafana"
    static_configs:
      - targets: ["10.0.0.84:3002"]
        labels:
          service: "grafana"
